var Stone,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Stone = (function(_super) {
  __extends(Stone, _super);

  function Stone(type, x, y, z, scale) {
    var geometry, height, i, jizz, material, obj, radius, size, v, vertices, _i, _j, _k, _ref, _ref1, _ref2;
    type = 1;
    y += 10;
    switch (type) {
      case 0:
        size = 5.5 * scale;
        obj = {
          type: 'box',
          size: [size, size, size],
          pos: [x, y, z],
          move: true,
          world: Physics.world
        };
        geometry = new THREE.BoxGeometry(size, size, size, 2, 2, 2);
        material = new THREE.MeshLambertMaterial({
          color: 0xFFFFFF,
          wireframe: false
        });
        vertices = geometry.vertices;
        jizz = 3;
        for (i = _i = 0, _ref = vertices.length; _i < _ref; i = _i += 1) {
          v = vertices[i];
          v.x += (Math.random() - .5) * jizz;
          v.z += (Math.random() - .5) * jizz;
          if (v.y !== -size / 2) {
            v.y += (Math.random() - .5) * jizz;
          }
        }
        break;
      case 1:
        radius = 5 * scale;
        obj = {
          type: 'sphere',
          size: [radius * 0.5, radius * 0.5, radius * 0.5],
          pos: [x, y, z],
          move: true,
          world: Physics.world
        };
        geometry = new THREE.TetrahedronGeometry(radius, 2);
        material = new THREE.MeshLambertMaterial({
          color: 0xFFFFFF,
          wireframe: false
        });
        vertices = geometry.vertices;
        jizz = radius / 2.5;
        for (i = _j = 0, _ref1 = vertices.length; _j < _ref1; i = _j += 1) {
          v = vertices[i];
          v.x += (Math.random() - .5) * jizz;
          v.z += (Math.random() - .5) * jizz;
          v.y += (Math.random() - .5) * jizz;
        }
        break;
      case 2:
        height = 10;
        geometry = new THREE.CylinderGeometry(5, 5, height, 5, 3, false);
        material = new THREE.MeshLambertMaterial({
          color: 0xFFFFFF,
          wireframe: false
        });
        vertices = geometry.vertices;
        jizz = .5;
        for (i = _k = 0, _ref2 = vertices.length; _k < _ref2; i = _k += 1) {
          v = vertices[i];
          if (v.y !== height / 2) {
            v.x += (Math.random() - .5) * jizz;
            v.z += (Math.random() - .5) * jizz;
            v.y += (Math.random() - .5) * jizz;
          }
        }
        obj = {
          type: 'cylinder',
          size: [w, h, w, w, h, w, w, h, w, w, h, w],
          pos: [x, y, z],
          rot: [0, 0, 0, 0, 45, 0, 0, 22.5, 0, 0, -22.5, 0],
          move: true,
          world: Physics.world
        };
        break;
    }
    this.body = new OIMO.Body(obj);
    this.body.body.mass = 2 + Math.random();
    material.envMap = Data.textures.reflectionCube;
    material.reflectivity = .7;
    material.transparent = true;
    material.opacity = .8;
    material.combine = THREE.AddOperation;
    THREE.Mesh.call(this, geometry, material);
    return;
  }

  Stone.prototype.update = function(dt, golem) {
    var maxSpeed, speedX, speedY, speedZ, target;
    if (golem) {
      target = this.target;
      maxSpeed = 1.5;
      speedX = (target.x - this.body.body.position.x) * .25;
      if (speedX > maxSpeed) {
        speedX = maxSpeed;
      } else if (speedX < -maxSpeed) {
        speedX = -maxSpeed;
      }
      speedY = (target.y - this.body.body.position.y) * .25;
      if (speedY > maxSpeed) {
        speedY = maxSpeed;
      } else if (speedY < -maxSpeed) {
        speedY = -maxSpeed;
      }
      speedZ = (target.z - this.body.body.position.z) * .25;
      if (speedZ > maxSpeed) {
        speedZ = maxSpeed;
      } else if (speedZ < -maxSpeed) {
        speedZ = -maxSpeed;
      }
      this.body.body.linearVelocity.set(speedX, speedY, speedZ);
    }
    if (!golem || !this.body.getSleep()) {
      this.position.copy(this.body.getPosition());
      return this.quaternion.copy(this.body.getQuaternion());
    }
  };

  return Stone;

})(THREE.Mesh);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdvbGVtLzNkL1N0b25lLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFBLEtBQUE7RUFBQTtpU0FBQTs7QUFBQTtBQUVDLDBCQUFBLENBQUE7O0FBQVksRUFBQSxlQUFDLElBQUQsRUFBTSxDQUFOLEVBQVEsQ0FBUixFQUFVLENBQVYsRUFBWSxLQUFaLEdBQUE7QUFHWCxRQUFBLG1HQUFBO0FBQUEsSUFBQSxJQUFBLEdBQU8sQ0FBUCxDQUFBO0FBQUEsSUFDQSxDQUFBLElBQUssRUFETCxDQUFBO0FBR0EsWUFBTyxJQUFQO0FBQUEsV0FDTSxDQUROO0FBR0UsUUFBQSxJQUFBLEdBQU8sR0FBQSxHQUFJLEtBQVgsQ0FBQTtBQUFBLFFBQ0EsR0FBQSxHQUFNO0FBQUEsVUFBRSxJQUFBLEVBQUssS0FBUDtBQUFBLFVBQWMsSUFBQSxFQUFLLENBQUMsSUFBRCxFQUFNLElBQU4sRUFBVyxJQUFYLENBQW5CO0FBQUEsVUFBcUMsR0FBQSxFQUFJLENBQUMsQ0FBRCxFQUFHLENBQUgsRUFBSyxDQUFMLENBQXpDO0FBQUEsVUFBa0QsSUFBQSxFQUFLLElBQXZEO0FBQUEsVUFBNkQsS0FBQSxFQUFNLE9BQU8sQ0FBQyxLQUEzRTtTQUROLENBQUE7QUFBQSxRQUVBLFFBQUEsR0FBZSxJQUFBLEtBQUssQ0FBQyxXQUFOLENBQW1CLElBQW5CLEVBQXlCLElBQXpCLEVBQStCLElBQS9CLEVBQXNDLENBQXRDLEVBQXlDLENBQXpDLEVBQTRDLENBQTVDLENBRmYsQ0FBQTtBQUFBLFFBR0EsUUFBQSxHQUFlLElBQUEsS0FBSyxDQUFDLG1CQUFOLENBQTBCO0FBQUEsVUFBQyxLQUFBLEVBQU0sUUFBUDtBQUFBLFVBQWlCLFNBQUEsRUFBVSxLQUEzQjtTQUExQixDQUhmLENBQUE7QUFBQSxRQUtBLFFBQUEsR0FBVyxRQUFRLENBQUMsUUFMcEIsQ0FBQTtBQUFBLFFBTUEsSUFBQSxHQUFPLENBTlAsQ0FBQTtBQU9BLGFBQVMsMERBQVQsR0FBQTtBQUNDLFVB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IjoiL3NvdXJjZS8iLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBTdG9uZSBleHRlbmRzIFRIUkVFLk1lc2hcblxuXHRjb25zdHJ1Y3RvcjoodHlwZSx4LHkseixzY2FsZSktPlxuXG5cdFx0IyB0eXBlID89IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoyKVxuXHRcdHR5cGUgPSAxO1xuXHRcdHkgKz0gMTBcblx0XHRcblx0XHRzd2l0Y2godHlwZSlcblx0XHRcdHdoZW4gMFxuXHRcdFx0XHQjZ2VvbWV0cnkgY3ViaWNcblx0XHRcdFx0c2l6ZSA9IDUuNSpzY2FsZVxuXHRcdFx0XHRvYmogPSB7IHR5cGU6J2JveCcsIHNpemU6W3NpemUsc2l6ZSxzaXplXSwgcG9zOlt4LHksel0sIG1vdmU6dHJ1ZSwgd29ybGQ6UGh5c2ljcy53b3JsZCB9O1xuXHRcdFx0XHRnZW9tZXRyeSA9IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeSggc2l6ZSwgc2l6ZSwgc2l6ZSAsIDIsIDIsIDIgKTtcblx0XHRcdFx0bWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaExhbWJlcnRNYXRlcmlhbCh7Y29sb3I6MHhGRkZGRkYsIHdpcmVmcmFtZTpmYWxzZX0pXG5cblx0XHRcdFx0dmVydGljZXMgPSBnZW9tZXRyeS52ZXJ0aWNlc1xuXHRcdFx0XHRqaXp6ID0gM1xuXHRcdFx0XHRmb3IgaSBpbiBbMC4uLnZlcnRpY2VzLmxlbmd0aF0gYnkgMVxuXHRcdFx0XHRcdHYgPSB2ZXJ0aWNlc1tpXVxuXHRcdFx0XHRcdHYueCArPSAoTWF0aC5yYW5kb20oKS0uNSkqaml6elxuXHRcdFx0XHRcdHYueiArPSAoTWF0aC5yYW5kb20oKS0uNSkqaml6elxuXHRcdFx0XHRcdGlmKHYueSAhPSAtc2l6ZS8yKVxuXHRcdFx0XHRcdFx0di55ICs9IChNYXRoLnJhbmRvbSgpLS41KSpqaXp6XG5cdFx0XHRcdGJyZWFrXHRcblxuXHRcdFx0d2hlbiAxXG5cdFx0XHRcdCNnZW9tZXRyeSBjaXJjbGVcblx0XHRcdFx0cmFkaXVzID0gNSpzY2FsZVxuXHRcdFx0XHRvYmogPSB7IHR5cGU6J3NwaGVyZScsIHNpemU6W3JhZGl1cyowLjUsIHJhZGl1cyowLjUsIHJhZGl1cyowLjVdLCBwb3M6W3gseSx6XSwgbW92ZTp0cnVlLCB3b3JsZDpQaHlzaWNzLndvcmxkIH1cblx0XHRcdFx0Z2VvbWV0cnkgPSBuZXcgVEhSRUUuVGV0cmFoZWRyb25HZW9tZXRyeShyYWRpdXMsIDIpO1xuXHRcdFx0XHRtYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoTGFtYmVydE1hdGVyaWFsKHtjb2xvcjoweEZGRkZGRiwgd2lyZWZyYW1lOmZhbHNlfSlcblxuXHRcdFx0XHR2ZXJ0aWNlcyA9IGdlb21ldHJ5LnZlcnRpY2VzXG5cdFx0XHRcdGppenogPSByYWRpdXMvMi41XG5cdFx0XHRcdGZvciBpIGluIFswLi4udmVydGljZXMubGVuZ3RoXSBieSAxXG5cdFx0XHRcdFx0diA9IHZlcnRpY2VzW2ldXG5cdFx0XHRcdFx0di54ICs9IChNYXRoLnJhbmRvbSgpLS41KSpqaXp6XG5cdFx0XHRcdFx0di56ICs9IChNYXRoLnJhbmRvbSgpLS41KSpqaXp6XG5cdFx0XHRcdFx0di55ICs9IChNYXRoLnJhbmRvbSgpLS41KSpqaXp6XHRcblx0XHRcdFx0YnJlYWtcdFxuXG5cdFx0XHR3aGVuIDJcblx0XHRcdFx0I2dlb21ldHJ5IHRyaWFuZ2xlXG5cdFx0XHRcdGhlaWdodCA9IDEwXG5cdFx0XHRcdGdlb21ldHJ5ID0gbmV3IFRIUkVFLkN5bGluZGVyR2VvbWV0cnkoNSwgNSwgaGVpZ2h0LCA1LCAzLCBmYWxzZSlcblx0XHRcdFx0bWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaExhbWJlcnRNYXRlcmlhbCh7Y29sb3I6MHhGRkZGRkYsIHdpcmVmcmFtZTpmYWxzZX0pXG5cblx0XHRcdFx0dmVydGljZXMgPSBnZW9tZXRyeS52ZXJ0aWNlc1xuXHRcdFx0XHRqaXp6ID0gLjVcblx0XHRcdFx0Zm9yIGkgaW4gWzAuLi52ZXJ0aWNlcy5sZW5ndGhdIGJ5IDFcblx0XHRcdFx0XHR2ID0gdmVydGljZXNbaV1cblx0XHRcdFx0XHRpZih2LnkgIT0gaGVpZ2h0LzIpXG5cdFx0XHRcdFx0XHR2LnggKz0gKE1hdGgucmFuZG9tKCktLjUpKmppenpcblx0XHRcdFx0XHRcdHYueiArPSAoTWF0aC5yYW5kb20oKS0uNSkqaml6elxuXHRcdFx0XHRcdFx0di55ICs9IChNYXRoLnJhbmRvbSgpLS41KSpqaXp6XHRcblxuXHRcdFx0XHRvYmogPSB7IHR5cGU6J2N5bGluZGVyJywgc2l6ZTpbdyxoLHcsIHcsaCx3LCB3LGgsdywgdyxoLHddLCBwb3M6W3gseSx6XSwgcm90OlswLDAsMCwgMCw0NSwwLCAwLDIyLjUsMCwgMCwtMjIuNSwwXSwgbW92ZTp0cnVlLCB3b3JsZDpQaHlzaWNzLndvcmxkIH07XG5cdFx0XHRcdGJyZWFrXHRcblxuXHRcdEBib2R5ID0gbmV3IE9JTU8uQm9keShvYmopXG5cdFx0QGJvZHkuYm9keS5tYXNzID0gMitNYXRoLnJhbmRvbSgpXG5cblx0XHRtYXRlcmlhbC5lbnZNYXAgPSBEYXRhLnRleHR1cmVzLnJlZmxlY3Rpb25DdWJlXG5cdFx0bWF0ZXJpYWwucmVmbGVjdGl2aXR5ID0gLjdcblx0XHRtYXRlcmlhbC50cmFuc3BhcmVudCA9IHRydWVcblx0XHRtYXRlcmlhbC5vcGFjaXR5ID0gLjhcblx0XHRtYXRlcmlhbC5jb21iaW5lID0gVEhSRUUuQWRkT3BlcmF0aW9uXG5cblx0XHRUSFJFRS5NZXNoLmNhbGwodGhpcywgZ2VvbWV0cnksIG1hdGVyaWFsKVxuXG5cdFx0cmV0dXJuXG5cblx0dXBkYXRlOihkdCwgZ29sZW0pLT5cblx0XHRpZihnb2xlbSlcblx0XHRcdHRhcmdldCA9IEB0YXJnZXRcblx0XHRcdG1heFNwZWVkID0gMS41XG5cblx0XHRcdHNwZWVkWCA9ICh0YXJnZXQueC1AYm9keS5ib2R5LnBvc2l0aW9uLngpKi4yNVxuXHRcdFx0aWYoc3BlZWRYPm1heFNwZWVkKVxuXHRcdFx0XHRzcGVlZFggPSBtYXhTcGVlZFxuXHRcdFx0ZWxzZSBpZihzcGVlZFg8LW1heFNwZWVkKVxuXHRcdFx0XHRzcGVlZFggPSAtbWF4U3BlZWRcblxuXHRcdFx0c3BlZWRZID0gKHRhcmdldC55LUBib2R5LmJvZHkucG9zaXRpb24ueSkqLjI1XG5cdFx0XHRpZihzcGVlZFk+bWF4U3BlZWQpXG5cdFx0XHRcdHNwZWVkWSA9IG1heFNwZWVkXG5cdFx0XHRlbHNlIGlmKHNwZWVkWTwtbWF4U3BlZWQpXG5cdFx0XHRcdHNwZWVkWSA9IC1tYXhTcGVlZFxuXG5cdFx0XHRzcGVlZFogPSAodGFyZ2V0LnotQGJvZHkuYm9keS5wb3NpdGlvbi56KSouMjVcblx0XHRcdGlmKHNwZWVkWj5tYXhTcGVlZClcblx0XHRcdFx0c3BlZWRaID0gbWF4U3BlZWRcblx0XHRcdGVsc2UgaWYoc3BlZWRaPC1tYXhTcGVlZClcblx0XHRcdFx0c3BlZWRaID0gLW1heFNwZWVkXG5cblx0XHRcdEBib2R5LmJvZHkubGluZWFyVmVsb2NpdHkuc2V0KHNwZWVkWCxzcGVlZFksc3BlZWRaKVxuXG5cdFx0aWYgIWdvbGVtIHx8ICFAYm9keS5nZXRTbGVlcCgpXG5cdFx0XHRAcG9zaXRpb24uY29weShAYm9keS5nZXRQb3NpdGlvbigpKVxuXHRcdFx0QHF1YXRlcm5pb24uY29weShAYm9keS5nZXRRdWF0ZXJuaW9uKCkpIl19